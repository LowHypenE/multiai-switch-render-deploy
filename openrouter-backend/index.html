<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OpenRouter AI Chat</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
  .chatbox { max-width: 500px; margin: auto; padding: 10px; background: #fff; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
  textarea { width: 100%; padding: 5px; }
  select, button { margin-top: 10px; padding: 5px; width: 100%; }
  .reply { margin-top: 10px; padding: 5px; background: #eee; border-radius: 5px; }
</style>
</head>
<body>

<div class="chatbox">
  <h3>Ask AI</h3>
  <textarea id="userInput" rows="4" placeholder="Type your message here..."></textarea>
  <select id="modelSelect">
    <option value="openai/gpt-oss-20b">OSS 20B (free)</option>
    <option value="openai/Qwen3-235B-A22B">Qwen3 235B A22B (free)</option>
    <option value="openai/Deepseek-R1-0528-Qwen3-8B">DeepSeek (free)</option>
  </select>
  <button onclick="askAI()">Send</button>
  <div class="reply" id="aiReply"></div>
</div>

<script>
async function askAI() {
  const message = document.getElementById("userInput").value;
  const model = document.getElementById("modelSelect").value;

  if (!message.trim()) return;

  document.getElementById("aiReply").innerText = "Loading...";

  try {
    const res = await fetch("/ask", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message, model })
    });

    const data = await res.json();
    document.getElementById("aiReply").innerText = data.reply;
  } catch (err) {
    document.getElementById("aiReply").innerText = "Error: " + err.message;
  }
}
</script>

</body>
</html>